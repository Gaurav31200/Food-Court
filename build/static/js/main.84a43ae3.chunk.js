(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,function(e,t,a){e.exports={form:"Checkout_form__2S0PB",control:"Checkout_control__3txrM",actions:"Checkout_actions__3w99E",submit:"Checkout_submit__37lOe",disabled:"Checkout_disabled__1U7qB",invalid:"Checkout_invalid__5ftrW","error-text":"Checkout_error-text__3EV1U"}},,function(e,t,a){e.exports={"cart-items":"Cart_cart-items__22n6N",total:"Cart_total__3SzW0",actions:"Cart_actions__2wLnL","button--alt":"Cart_button--alt__1JNSi",button:"Cart_button__jEymw",error:"Cart_error__29_dr"}},,,function(e,t,a){e.exports={"cart-item":"CartItem_cart-item__23u0o",summary:"CartItem_summary__hgyBB",price:"CartItem_price__enMdB",amount:"CartItem_amount__2muEl",actions:"CartItem_actions__1lUjP"}},function(e,t,a){e.exports={meal:"MealItem_meal__16viQ",description:"MealItem_description__38DRc",price:"MealItem_price__3XrJP"}},,function(e,t,a){e.exports={button:"HeaderCartButton_button__aRbd1",icon:"HeaderCartButton_icon__1eyQW",badge:"HeaderCartButton_badge__3F6sw",bump:"HeaderCartButton_bump__2GFx-"}},function(e,t,a){e.exports={backdrop:"Modal_backdrop__2c9KA",modal:"Modal_modal__3WAyv","slide-down":"Modal_slide-down__2nIUM"}},function(e,t,a){e.exports={meals:"AvailableMeals_meals__1QEAX","meals-appear":"AvailableMeals_meals-appear__3-mIz",mealsLoading:"AvailableMeals_mealsLoading__3DlMg",mealsError:"AvailableMeals_mealsError__3u2az"}},,,,function(e,t,a){e.exports={header:"Header_header__2DYap","main-image":"Header_main-image__2TFRf"}},,,function(e,t,a){e.exports={input:"Input_input__SxjK9"}},function(e,t,a){e.exports={form:"MealItemForm_form__34inY"}},function(e,t,a){e.exports={card:"Card_card__24Qwp"}},function(e,t,a){e.exports={summary:"MealsSummary_summary__3BxLt"}},,,,,,,,function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var n=a(6),c=a.n(n),r=a(2),i=(a(31),a(1)),s=a.n(i),o=a(4),l={value:"",isValueTouched:!1},u=function(e,t){return"INPUT"===t.type?{value:t.value,isValueTouched:e.isValueTouched}:"BLUR"===t.type?{value:e.value,isValueTouched:!0}:l},d=function(e){var t=Object(i.useReducer)(u,l),a=Object(o.a)(t,2),n=a[0],c=a[1],r=e(n.value),s=!r&&n.isValueTouched;return{value:n.value,valueIsValid:r,isValueTouched:n.isValueTouched,error:s,inputValueHandler:function(e){c({type:"INPUT",value:e.target.value})},inputBlurHandler:function(){c({type:"BLUR"})},reset:function(){c({type:"RESET"})}}},m=a(7),j=Object(m.b)({name:"ui",initialState:{modal:!1,form:!1,isBtnHighlighted:!1},reducers:{openForm:function(e){e.form=!0},closeForm:function(e){e.form=!1},openModal:function(e){e.modal=!0},closeModal:function(e){e.modal=!1},setBtnToHighlight:function(e){e.isBtnHighlighted=!0},setBtnToNormal:function(e){e.isBtnHighlighted=!1},resetUi:function(e){e.modal=!1,e.form=!1,e.isBtnHighlighted=!1}}}),b=j.reducer,h=j.actions,p=a(3),f=a.n(p),O=a(0),x=function(e){var t=Object(r.b)(),a=d((function(e){return""!==e})),n=a.value,c=a.valueIsValid,i=a.error,s=a.inputValueHandler,o=a.inputBlurHandler,l=a.reset,u=d((function(e){return""!==e})),m=u.value,j=u.valueIsValid,b=u.error,p=u.inputValueHandler,x=u.inputBlurHandler,_=u.reset,v=d((function(e){return""!==e})),y=v.value,g=v.valueIsValid,N=v.error,C=v.inputValueHandler,I=v.inputBlurHandler,B=v.reset,S=d((function(e){return""!==e})),k=S.value,A=S.valueIsValid,F=S.error,H=S.inputValueHandler,M=S.inputBlurHandler,E=S.reset,T=!1;c&&j&&g&&A&&(T=!0);var w="".concat(f.a.control," ").concat(i?f.a.invalid:""),V="".concat(f.a.control," ").concat(b?f.a.invalid:""),q="".concat(f.a.control," ").concat(N?f.a.invalid:""),P="".concat(f.a.control," ").concat(F?f.a.invalid:"");return Object(O.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),T){var a={user:n,street:m,postal:y,city:k};e.onConfirm(a),l(),_(),B(),E()}},children:[Object(O.jsxs)("div",{className:f.a.form,children:[Object(O.jsxs)("div",{className:w,children:[Object(O.jsx)("label",{htmlFor:"name",children:"Your Name"}),Object(O.jsx)("input",{id:"name",type:"text",onChange:s,onBlur:o,value:n}),i&&Object(O.jsx)("p",{className:f.a["error-text"],children:"Name shouldn't be Empty!"})]}),Object(O.jsxs)("div",{className:V,children:[Object(O.jsx)("label",{htmlFor:"street",children:"Street"}),Object(O.jsx)("input",{id:"street",type:"text",onChange:p,onBlur:x,value:m}),b&&Object(O.jsx)("p",{className:f.a["error-text"],children:"Street Name Shouldn't be Empty!"})]}),Object(O.jsxs)("div",{className:q,children:[Object(O.jsx)("label",{htmlFor:"postal",children:"Postal"}),Object(O.jsx)("input",{id:"postal",type:"text",onChange:C,onBlur:I,value:y}),N&&Object(O.jsx)("p",{className:f.a["error-text"],children:"Postal Name Shouldn't be Empty!"})]}),Object(O.jsxs)("div",{className:P,children:[Object(O.jsx)("label",{htmlFor:"city",children:"City"}),Object(O.jsx)("input",{id:"city",type:"text",onChange:H,onBlur:M,value:k}),F&&Object(O.jsx)("p",{className:f.a["error-text"],children:"City Name Shouldn't be Empty!"})]})]}),Object(O.jsxs)("div",{className:f.a.actions,children:[Object(O.jsx)("button",{type:"button",onClick:function(){t(h.closeForm()),t(h.closeModal())},children:"Cancel"}),Object(O.jsx)("button",{disabled:!T,className:T?f.a.submit:f.a.disabled,children:"Confirm"})]})]})},_=a(12),v=a.n(_),y=function(){return Object(O.jsx)("div",{className:v.a.backdrop})},g=function(e){return Object(O.jsx)("div",{className:v.a.modal,children:Object(O.jsx)("div",{className:v.a.content,children:e.children})})},N=document.getElementById("overlays");function C(e){return Object(O.jsxs)(O.Fragment,{children:[c.a.createPortal(Object(O.jsx)(y,{}),N),c.a.createPortal(Object(O.jsx)(g,{children:e.children}),N)]})}var I=a(5),B=a.n(I),S=Object(m.b)({name:"cart",initialState:{selectedItems:[],totalQuantity:0,totalAmount:0,changed:!1},reducers:{replaceCart:function(e,t){e.selectedItems=t.payload.selectedItems,e.totalQuantity=t.payload.totalQuantity,e.totalAmount=t.payload.totalAmount},addItem:function(e,t){e.changed=!0;var a=t.payload,n=e.selectedItems.find((function(e){return e.id===a.id})),c=+a.quantity;n?(n.quantity+=c,n.totalPrice=a.price*c,e.totalAmount+=n.totalPrice):(e.selectedItems.push({id:a.id,price:a.price,quantity:c,totalPrice:a.price*c,name:a.title}),e.totalAmount+=a.price*c),e.totalQuantity+=+a.quantity},removeItem:function(e,t){e.totalQuantity--,e.changed=!0;var a=t.payload,n=e.selectedItems.find((function(e){return e.id===a}));1===n.quantity?e.selectedItems=e.selectedItems.filter((function(e){return e.id!==a})):(n.quantity--,n.totalPrice-=n.price),e.totalAmount-=n.price,e.totalAmount<0&&(e.totalAmount=0)},clearCart:function(e){e.selectedItems=[],e.totalAmount=0,e.totalQuantity=0}}}),k=S.reducer,A=S.actions,F=a(8),H=a.n(F);function M(e){var t=Object(r.b)(),a=e.newItem,n=a.id,c=a.name,i=a.qty,s=a.price;return Object(O.jsxs)("li",{className:H.a["cart-item"],children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:c}),Object(O.jsxs)("div",{className:H.a.summary,children:[Object(O.jsxs)("span",{className:H.a.price,children:["\u20b9",s]}),Object(O.jsxs)("span",{className:H.a.amount,children:[i,"x"]})]})]}),Object(O.jsxs)("div",{className:H.a.actions,children:[Object(O.jsx)("button",{onClick:function(){t(A.addItem({id:n,title:c,price:s,quantity:1}))},children:"+"}),Object(O.jsx)("button",{onClick:function(){t(A.removeItem(n))},children:"-"})]})]},n)}var E=a(19),T=a(16),w=a.n(T),V=function(){var e=Object(i.useState)(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(i.useState)(null),r=Object(o.a)(c,2),s=r[0],l=r[1],u=Object(i.useCallback)(function(){var e=Object(E.a)(w.a.mark((function e(t,a){var c,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),l(null),e.prev=2,e.next=5,fetch(t.url,{method:t.method?t.method:"GET",body:t.body?JSON.stringify(t.body):null,headers:t.headers?t.headers:{}});case 5:if((c=e.sent).ok){e.next=8;break}throw new Error("Request failed!");case 8:return e.next=10,c.json();case 10:r=e.sent,a(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),l(e.t0.message||"Something went wrong!");case 17:n(!1);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,a){return e.apply(this,arguments)}}(),[]);return{isLoading:a,error:s,sendRequest:u}};function q(){var e=Object(r.c)((function(e){return e.cart.selectedItems})),t=Object(r.c)((function(e){return e.ui.form})),a=Object(r.c)((function(e){return e.ui.modal})),n=Object(r.c)((function(e){return e.cart.totalAmount}));n=n.toFixed(2);var c=Object(i.useState)(!1),s=Object(o.a)(c,2),l=s[0],u=s[1],d=V(),m=d.isLoading,j=d.error,b=d.sendRequest,p=Object(r.b)(),f=Object(O.jsx)("ul",{style:{height:t?"0px":"auto"},className:B.a["cart-items"],children:e.map((function(e){return Object(O.jsx)(M,{newItem:{id:e.id,name:e.name,qty:e.quantity,price:e.price}},e.id)}))});0===e.length&&(f=Object(O.jsx)("p",{children:"No Items Selected So Far"}));var _=Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{children:f}),Object(O.jsxs)("div",{className:B.a.total,children:[Object(O.jsx)("span",{children:"Total Amount"}),Object(O.jsxs)("span",{children:["\u20b9",n]})]}),t&&Object(O.jsx)(x,{onConfirm:function(t){b({url:"https://react-http-4b354-default-rtdb.firebaseio.com/orders.json",method:"POST",body:{user:t,orderedItems:e},headers:{"Content-Type":"application/json"}},(function(){})),u(!0)}}),!t&&Object(O.jsxs)("div",{className:B.a.actions,children:[Object(O.jsx)("button",{onClick:function(){p(h.closeModal())},className:B.a["button--alt"],children:"Close"}),0!==e.length&&Object(O.jsx)("button",{className:B.a.button,onClick:function(){p(h.openForm())},children:"Order"})]})]});return m&&(_=Object(O.jsx)("p",{children:"Sending Order Data...."})),!m&&l&&(_=Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("p",{children:"Successfully sent the order"}),Object(O.jsx)("div",{className:B.a.actions,onClick:function(){u(!1),p(h.resetUi()),p(A.clearCart())},children:Object(O.jsx)("button",{className:B.a["button--alt"],children:"Close"})})]})),j&&(_=Object(O.jsx)("p",{children:j})),a&&Object(O.jsx)(C,{children:_})||null}var P=a(17),Q=a.n(P),R=a(11),L=a.n(R);function U(){var e=Object(r.c)((function(e){return e.cart.totalQuantity})),t=Object(r.c)((function(e){return e.ui.isBtnHighlighted})),a=Object(r.b)(),n="".concat(L.a.button," ").concat(t?L.a.bump:"");Object(i.useEffect)((function(){0!==e&&a(h.setBtnToHighlight())}),[e,a]);return Object(O.jsxs)("button",{onClick:function(){a(h.openModal())},className:n,children:[Object(O.jsx)("span",{className:L.a.icon,children:Object(O.jsx)("i",{className:"fas fa-shopping-cart"})})," ","Your Cart",Object(O.jsx)("span",{className:L.a.badge,children:e})]})}function D(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("header",{className:Q.a.header,children:[Object(O.jsx)("h1",{children:"Food Court"}),Object(O.jsx)(U,{})]}),Object(O.jsx)("div",{className:Q.a["main-image"],children:Object(O.jsx)("img",{src:"image1.jpg",alt:"Meals are missing"})})]})}var J=a(10),Y=a(20),W=a.n(Y),z=s.a.forwardRef((function(e,t){return Object(O.jsxs)("div",{className:W.a.input,children:[Object(O.jsx)("label",{htmlFor:e.input.id,children:e.label}),Object(O.jsx)("input",Object(J.a)({ref:t},e.input))]})})),G=a(9),K=a.n(G),X=a(21),Z=a.n(X);function $(e){var t=Object(r.b)(),a=Object(i.useRef)();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:e.name}),Object(O.jsx)("p",{className:K.a.description,children:e.description}),Object(O.jsxs)("p",{className:K.a.price,children:["\u20b9",e.price]})]}),Object(O.jsxs)("form",{onSubmit:function(n){n.preventDefault();var c=a.current.value;t(A.addItem({id:e.id,title:e.name,price:e.price,quantity:c})),a.current.value=1},className:Z.a.form,children:[Object(O.jsx)(z,{label:"Amount",ref:a,input:{id:"amount",type:"number",min:"1",max:"5",defaultValue:"1",step:"1"}}),Object(O.jsx)("button",{type:"submit",children:"+ Add"})]})]})}var ee=a(13),te=a.n(ee),ae=a(22),ne=a.n(ae);function ce(e){return Object(O.jsx)("div",{className:"".concat(ne.a.card," ").concat(e.className),children:e.children})}function re(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),a=t[0],n=t[1],c=V(),r=c.isLoading,s=c.error,l=c.sendRequest;Object(i.useEffect)((function(){l({url:"https://react-http-4b354-default-rtdb.firebaseio.com/meals.json"},(function(e){var t=[];for(var a in e)t.push({id:a,name:e[a].name,price:e[a].price,description:e[a].description});n(t)}))}),[l]);var u=Object(O.jsx)("h2",{children:"No meals found. Start adding some!"});a.length>0&&(u=Object(O.jsx)("ul",{children:a.map((function(e){return Object(O.jsx)("li",{className:K.a.meal,children:Object(O.jsx)($,{id:e.id,name:e.name,description:e.description,price:e.price})},e.id)}))}));var d=Object(O.jsx)(ce,{className:te.a.meals,children:u});return s&&(d=Object(O.jsx)("p",{className:te.a.mealsError,children:"Failed to fetch"})),r&&(d=Object(O.jsx)("p",{className:te.a.mealsLoading,children:"Loading Meals"})),d}var ie=a(23),se=a.n(ie);function oe(){return Object(O.jsxs)(ce,{className:se.a.summary,children:[Object(O.jsx)("h2",{children:"Delicious Food,Delivered To You"}),"Choose your favourite meal from our board selection of availaible meals and enjoy a delicious lunch or dinner at home.",Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),"All our meals are cooked with high quality ingredients, just-in-time and of course by experienced chefs!"]})}var le=!0;var ue=function(){var e=Object(r.c)((function(e){return e.cart})),t=Object(r.b)(),a=V().sendRequest;return Object(i.useEffect)((function(){a({url:"https://react-http-4b354-default-rtdb.firebaseio.com/cart.json",headers:{"Content-Type":"application/json"}},(function(e){console.log(e),t(A.replaceCart({selectedItems:e.selectedItems||[],totalQuantity:e.totalQuantity,totalAmount:e.totalAmount}))}))}),[a,t]),Object(i.useEffect)((function(){le?le=!1:e.changed&&a({url:"https://react-http-4b354-default-rtdb.firebaseio.com/cart.json",method:"PUT",body:{selectedItems:e.selectedItems,totalQuantity:e.totalQuantity,totalAmount:e.totalAmount},headers:{"Content-Type":"application/json"}},(function(){}))}),[a,e]),Object(O.jsxs)(s.a.Fragment,{children:[Object(O.jsx)(q,{}),Object(O.jsx)(D,{}),Object(O.jsx)(oe,{}),Object(O.jsx)(re,{})]})},de=Object(m.a)({reducer:{ui:b,cart:k}});c.a.render(Object(O.jsx)(r.a,{store:de,children:Object(O.jsx)(ue,{})}),document.getElementById("root"))}],[[34,1,2]]]);
//# sourceMappingURL=main.84a43ae3.chunk.js.map